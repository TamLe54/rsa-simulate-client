var S=Object.defineProperty,U=Object.defineProperties;var _=Object.getOwnPropertyDescriptors;var h=Object.getOwnPropertySymbols;var C=Object.prototype.hasOwnProperty,F=Object.prototype.propertyIsEnumerable;var T=(s,a,r)=>a in s?S(s,a,{enumerable:!0,configurable:!0,writable:!0,value:r}):s[a]=r,k=(s,a)=>{for(var r in a||(a={}))C.call(a,r)&&T(s,r,a[r]);if(h)for(var r of h(a))F.call(a,r)&&T(s,r,a[r]);return s},I=(s,a)=>U(s,_(a));var j=(s,a)=>{var r={};for(var t in s)C.call(s,t)&&a.indexOf(t)<0&&(r[t]=s[t]);if(s!=null&&h)for(var t of h(s))a.indexOf(t)<0&&F.call(s,t)&&(r[t]=s[t]);return r};import{a as e,j as c,t as A,M as L,l as R,r as x,V as l,F as E,U as f,B as q,a8 as V}from"./vendor.2bbcded4.js";import{a as z,T as O,S as G,b as K,d as Y,i as D}from"./index.8aff0b31.js";import{P as b,r as y,p as B,e as P,s as H}from"./validations.aac5f80f.js";import{U as J}from"./InConstruction.c0b15ec2.js";const Q=N=>{var m=N,{open:s,children:a,title:r,subTitle:t,onClick:p,showCloseIcon:d=!1,buttonTitle:i}=m,w=j(m,["open","children","title","subTitle","onClick","showCloseIcon","buttonTitle"]);return e(L,I(k({focusTrapped:!1,open:s,center:!0,showCloseIcon:d,closeOnOverlayClick:!1,classNames:{modal:"spa-modal"},closeIcon:e(z,{width:32,height:32})},w),{children:a!=null?a:c("div",{className:"w-[33rem] h-fit flex flex-col gap-8 items-center justify-center",children:[e(O,{type:"filled",width:67,height:67,color:A.useToken().token.colorPrimary}),c("div",{className:"w-full h-fit flex flex-col gap-2 items-center justify-center",children:[e("div",{className:"typo-header-1-semibold text-black",children:r}),e("div",{className:"typo-body-1-regular text-old-silver text-center",children:t})]}),e(G,{type:"link",size:"small",onClick:p,children:i})]})}))},W=()=>e("div",{className:"pt-[32px] pb-[72px]",children:c("div",{className:"max-w-[866px] p-[80px] mx-auto bg-white shadow-[0_24px_48px_-12px_rgba(23,23,23,0.20)] rounded-[20px]",children:[e("h1",{className:"typo-header-1-semibold text-center m-0 mb-[32px]",children:"Change password"}),e($,{})]})}),X=async({data:s})=>(await K.post(Y.auth.changePassword,s)).data,Z=()=>R({mutationFn:X}),$=()=>{const{mutateAsync:s,isLoading:a,error:r}=Z(),[t,p]=x.exports.useState(!1),[d]=l.useForm(),[i,w]=x.exports.useState(!1),{mutate:N}=D(),m=o=>o.touched,M=(o,n)=>{const u=n.every(m);u!==i&&w(u)},g={email:[y],oldAndNewPassword:[y,{validator:async(o,n)=>{await B(P.password.invalid)(o,n)}}],confirmNewPassword:[y,{validator:async(o,n)=>{await B(P.password.invalid)(o,n)}},{validator:async(o,n)=>H(d.getFieldValue("newPassword"),P.password.missMatch)(o,n)}]},v=()=>N();return x.exports.useEffect(()=>{let o;return t&&(o=setTimeout(v,3e3)),()=>clearTimeout(o)},[t]),c(E,{children:[e(l,{name:"change-password",layout:"vertical",autoComplete:"off",form:d,requiredMark:!1,onFinish:async o=>{const{oldPassword:n,newPassword:u}=o;await s({data:{oldPassword:n,newPassword:u}}).then(()=>{p(!0),d.resetFields()})},onFieldsChange:M,children:(o,n)=>c(E,{children:[e("div",{className:"mb-[32px]",children:e(l.Item,{label:"Current Password",name:"oldPassword",extra:n.getFieldError("oldPassword").length===0&&"*Include 8 to 20 characters, lower and upper case characters, numbers, and special characters combined",className:"font-medium m-0",rules:g.oldAndNewPassword,children:e(f.Password,{className:"h-12 px-[14px] py-[12px] mb-[6px]",iconRender:b,placeholder:"Enter your current password"})})}),e("div",{className:"mb-[32px]",children:e(l.Item,{label:"New Password",name:"newPassword",extra:n.getFieldError("newPassword").length===0&&"*Include 8 to 20 characters, lower and upper case characters, numbers, and special characters combined",className:"font-medium m-0",rules:g.oldAndNewPassword,children:e(f.Password,{iconRender:b,className:"h-12 px-[14px] py-[12px] mb-[6px]",placeholder:"Enter your new password"})})}),e("div",{className:"mb-[32px]",children:e(l.Item,{shouldUpdate:!0,label:"Confirm New Password",name:"confirmNewPassword",extra:n.getFieldError("confirmNewPassword").length===0&&"*Include 8 to 20 characters, lower and upper case characters, numbers, and special characters combined",className:"font-medium m-0",rules:g.confirmNewPassword,children:e(f.Password,{className:"h-12 px-[14px] py-[12px] mb-[6px]",iconRender:b,placeholder:"Enter your new password again"})})}),e(l.Item,{shouldUpdate:!0,children:()=>e(q,{type:"primary",htmlType:"submit",block:!0,size:"large",className:"border-none !h-12 shadow-none disable:bg-neutral-200 relative",disabled:!i,loading:a,children:a?"Changing password ...":"Verify"})}),r&&e("div",{className:"mb-[32px] right-0 left-0 text-error text-center",children:"Changed password unsuccessfully. Please try again."})]})}),e(Q,{onClick:v,title:"Password has been changed",subTitle:"Your password has been successfully changed in our system",buttonTitle:"Back to Log in Page",open:t,onClose:()=>{}})]})};const ee=[{key:"1",label:"General",children:e(J,{})},{key:"2",label:"Change Password",children:e(W,{})}],le=()=>e("div",{className:"flex flex-col gap-4",children:e(V,{className:"custom-tabs",defaultActiveKey:"1",type:"card",items:ee,tabBarStyle:{marginBottom:0}})});export{W as ChangePassword,$ as ChangePasswordForm,le as Setting};
